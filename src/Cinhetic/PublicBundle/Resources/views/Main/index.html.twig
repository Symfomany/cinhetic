{% extends 'CinheticPublicBundle::layout.html.twig' %}
{% import 'LexikPayboxBundle:Macro:paybox.html.twig' as paybox %}

{% block javascripts %}
    {{ parent() }}
    <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap-carousel.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#scrollTop').click(function(e)
            {
                e.preventDefault();
                $("html, body").animate({
                    scrollTop: 0
                    }, {
                    duration: "slow",
                    easing: "easeOutQuad"
                });
            });
        });
    </script>
{% endblock %}

{% block content %}

    {#{{ render(controller('CinheticPublicBundle:Movies:carousselMovies')) }}#}

    <div class="row">
        <div class="col-md-5 col-md-offset-3">
            <h3 class="text-center"><i class="glyphicon glyphicon-bookmark"></i> Les Prochaines séances</h3>
            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                {% if seances|length - 1 > 0 %}
                    <ol class="carousel-indicators">
                        {% for i in 0..(seances|length - 1) %}
                            <li data-target="#myCarousel" data-slide-to="{{ i }}" {% if i == 0 %}class="active"{% endif %}></li>
                        {% endfor %}
                    </ol>
                {% endif %}
                <div class="carousel-inner">
                    {% for entity in seances %}
                        <div class="item{% if loop.index == 1%} active{% endif %}">
                            <img src="{{ entity.movies.image }}">
                            <div class="container">
                                <div class="carousel-caption">
                                    <p>{{ entity.movies.title }} le  à {{ entity.cinema.title }} le {{ entity.dateSession|date('d/m/Y H:i') }}</p>
                                    <p><a class="btn btn-primary" href="{{ path('movies_show', {'id' : entity.movies.id}) }}" role="button">Visualiser</a></p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                {% if seances|length - 1 > 0 %}
                    <a class="left carousel-control" href="#myCarousel" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a>
                    <a class="right carousel-control" href="#myCarousel" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
                {% endif %}
            </div>
        </div>
    </div>

    <br />
    <hr />
    <div class="row marketing">
        <div class="col-lg-6">
            {{ render(controller('CinheticPublicBundle:Movies:currentMovies')) }}
        </div>

        <div class="col-lg-6">
            {{ render(controller('CinheticPublicBundle:Movies:starsMovies')) }}
        </div>
    </div>

    <hr class="featurette-divider">

    <div class="page-footer">
        <p class="pull-right"><a id="scrollTop" href="#">Back to top</a></p>
        <p>© 2014 Company, Inc. · <a href="#">Privacy</a> · <a href="#">Terms</a></p>
    </div>
{% endblock %}